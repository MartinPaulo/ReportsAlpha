{% extends 'base.html' %}
{% block title %}Report Details{% endblock %}
{% block header_lines %}
    {% load static %}
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/nvd3/1.8.3/nv.d3.css"/>
    <style>

        {# We want to fill the page with as much of the graph as is possible#}
        html, body {
            height: 99%;
        }

        #chart {
            height: 60%;
            width: 95%;
        }
    </style>
{% endblock %}

{% block h1 %}{{ report.report_title }}{% endblock %}
{% block content %}

    {% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

    <div class="row">
        <div id="graph-buttons" class="btn-group pull-right">

        </div>
    </div>
    <div class="row">
        <div id="date-buttons" class="btn-group pull-right">

        </div>
    </div>

    <div id="chart">
        <svg></svg>
    </div>

    <p>{{ report.description }}</p>
    {% if debug %}
        <p>The <a id="a_data" href="">data file</a> behind this graph</p>
    {% endif %}
    <div id="extra" style="width: 95%">
        <div id="extra_title"></div>
        <svg></svg>
    </div>

    <a href="/reports/?set={{ set }}">Back {% if not set %}to all reports {% endif %}...</a>

    <script src="//d3js.org/d3.v3.js"></script>
    {#  From: https://cdnjs.com/libraries/nvd3 #}
    <script src="//cdnjs.cloudflare.com/ajax/libs/nvd3/1.8.3/nv.d3.js"></script>
    <script src="/static/reports/js/utils.js"></script>
    {#    TODO: make the following a tag? Or work out how not to hardcode static path?#}
    <script src="/static/reports/js/charts/uptime_bullet.js"></script>
    <script src="/static/reports/js/charts/uptime_history.js"></script>
    <script src="/static/reports/js/{{ report.d3_file_name }}"></script>
    <script>
        report.d3.render();
    </script>

{% endblock %}